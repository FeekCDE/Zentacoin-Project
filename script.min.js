document.addEventListener("DOMContentLoaded", function () {
  const menuToggle = document.getElementById("menuToggle");
  const navbarMenu = document.getElementById("navbarMenu");
  if (menuToggle && navbarMenu) {
    menuToggle.addEventListener("click", function () {
      this.classList.toggle("active");
      navbarMenu.classList.toggle("active");
    });
    document.querySelectorAll(".navbar-menu a").forEach((link) => {
      link.addEventListener("click", () => {
        menuToggle.classList.remove("active");
        navbarMenu.classList.remove("active");
      });
    });
  }
  const zenCards = document.querySelectorAll(".zen-feature-card");
  if (zenCards.length > 0) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      },
      { threshold: 0.3 }
    );
    zenCards.forEach((card) => observer.observe(card));
  }
  const animatedElements = document.querySelectorAll(
    ".feature-item, .phase, .widget-container"
  );
  animatedElements.forEach((el) => {
    el.style.opacity = "0";
    el.style.transform = "translateY(20px)";
    el.style.transition = "all 0.6s ease";
  });
  const animateOnScroll = () => {
    animatedElements.forEach((el) => {
      const rect = el.getBoundingClientRect();
      const screenPosition = window.innerHeight / 1.3;
      if (rect.top < screenPosition) {
        el.style.opacity = "1";
        el.style.transform = "translateY(0)";
      }
    });
  };
  let scrollTimeout;
  window.addEventListener("scroll", () => {
    clearTimeout(scrollTimeout);
    scrollTimeout = setTimeout(animateOnScroll, 10);
  });
  animateOnScroll();
});
